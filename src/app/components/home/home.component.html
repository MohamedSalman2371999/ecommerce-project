<section>
  <div class="row g-0">
    <div class="col-md-9">
      <div class="mySwiper">
        <owl-carousel-o [options]="mainsliderOptions" class="w-100">
          <ng-template carouselSlide><img src="./assets/images/slide1.gif" class="w-100 mySwiper" alt=""></ng-template>  
          <ng-template carouselSlide><img src="./assets/images/slider2.avif" class="w-100 mySwiper"  alt=""></ng-template>  
          <ng-template carouselSlide><img src="./assets/images/grocery-banner.png" class="w-100 mySwiper" alt=""></ng-template>  
          <ng-template carouselSlide><img src="./assets/images/slider4.avif" class="w-100 mySwiper" alt=""></ng-template>  
          <ng-template carouselSlide><img src="./assets/images/grocery-banner-2.jpeg" class="w-100 mySwiper" alt=""></ng-template>  
        </owl-carousel-o>
      </div>
    </div>
    <div class="col-md-3">
      <div class="sideImgs">
        <img src="./assets/images/slider-image-3.jpeg" class="w-100 mySwiper2" alt="">
        <img src="./assets/images/slider-image-2.jpeg" class="w-100 mySwiper2" alt="">
      </div>
    </div>
  </div>
</section>
<div class="container-fluid">
  <section class="my-3">
    <h1 class="h2 text-main">All Categories :</h1>
      <owl-carousel-o [options]="customOptions">
        @for (Categorie of CategoriestList; track Categorie._id) {
        <ng-container>
          <ng-template carouselSlide>
              <div class="forSmallDevices cr " [routerLink]="['/subCategory',Categorie._id]">
                <img
                  [src]="Categorie.image"
                  height="250px"
                  class="w-100"
                  alt=""
                />
                <h3 class="h6 text-main my-2">{{ Categorie.name }}</h3>
              </div>
            </ng-template>
        </ng-container>
        }
      </owl-carousel-o>
  </section>
  <section class="my-3">
    <h1 class="h2 text-main">{{'Popular Products :' | translate}}</h1>
    <input
      [(ngModel)]="text"
      type="search"
      placeholder="Search By Products Name...."
      class="form-control w-50 mx-auto my-2"
    />
    <div class="row rowProduct g-3">
      <!-- @if (heartproduct!=null) {
        @for (product of heartproduct| search : text; track product.id) {
          <div class="col-lg-2 col-md-3 colProduct col-sm-6">
            <div class="product forSmallDevices position-relative">
                <div [routerLink]="['/details', product.id]" class="cr">
                  <div class="imgContainer">
                    <img
                      [src]="product.imageCover"
                      class="imageCover w-100"
                      [alt]="product.title"
                    />
                  </div>
                  <div class="p-1">
                    <h3 class="small text-main p-0 m-0">
                      {{ product.category.name }}
                    </h3>
                  </div>
                  <div
                    class="ratingdetails m-0 p-1"
                  >
                    <span class="productPrice">{{ product.price }} EGP</span>
                    <div>
                      @for (rat of stars.slice(0,product.ratingsAverage); track
                      $index) {
                      <span class="Sfa-star"
                        ><i class="fas fa-star rating-color"></i
                      ></span>
                      } @if (product.ratingsAverage%2 != 0 &&
                      product.ratingsAverage!=5) {
                      <i
                        class="Sfa-star fa-solid fa-star-half-stroke rating-color"
                      ></i>
                      }
                      <span class="productRatingsAverage text-muted">{{
                        product.ratingsAverage
                      }}</span>
                    </div>
                  </div>
                </div>
                <div class="TitleandHeart">
                  <h4 class="h6 p-0 m-0">
                    {{ product.title.split(" ", 2).join(" ") }}
                  </h4>
                  <div class="heartIcon text-danger">
                    <span (click)="addProductToWishList(product.id)">
                      <i class="fa-solid fa-heart" (click)="chageHeart($event)"></i>
                    </span>
                  </div>
                </div>
                <div class="p-2">
                  <button (click)="addToCard(product.id)" class="btn-main w-100">
                    Add to Card
                  </button>
                </div>
            </div>
          </div>
        }
      } -->
      @for (product of productList.slice(0,15)| search : text; track product.id) {
          <div class="col-lg-2 col-md-3 colProduct col-sm-6">
            <div class="product forSmallDevices position-relative">
                <div [routerLink]="['/details', product.id]" class="cr">
                  <div class="imgContainer">
                    <img
                      [src]="product.imageCover"
                      class="imageCover w-100"
                      [alt]="product.title"
                    />
                  </div>
                  <div class="p-1">
                    <h3 class="small text-main p-0 m-0">
                      {{ product.category.name }}
                    </h3>
    
                  </div>
                </div>
                <div class="TitleandHeart p-0">
                  <h4 class="h6 p-0 m-0">
                    {{ product.title.split(" ", 2).join(" ") }}
                  </h4>
                  <div class="heartIcon">
                      @if (productID.includes(product._id)) {
                        <i (click)="deleteItem(product._id)" class="fa-solid fa-heart text-danger"></i>
                      }
                      @if(!productID.includes(product._id)){
                        <i (click)="addProductToWishList(product._id)" class="fa-regular fa-heart"></i>
                      }
                  </div>
                </div>
                <div  [routerLink]="['/details', product.id]" class="cr">
                <div
                  class="ratingdetails m-0 p-1"
                >
                  <span class="productPrice">{{ product.price }} EGP</span>
                  <div>
                    @for (rat of stars.slice(0,product.ratingsAverage); track
                    $index) {
                    <span class="Sfa-star"
                      ><i class="fas fa-star rating-color"></i
                    ></span>
                    } @if (product.ratingsAverage%2 != 0 &&
                    product.ratingsAverage!=5) {
                    <i
                      class="Sfa-star fa-solid fa-star-half-stroke rating-color"
                    ></i>
                    }
                    <span class="productRatingsAverage text-muted">{{
                      product.ratingsAverage
                    }}</span>
                  </div>
                </div>
                </div>

                <div class="p-2">
                  <button (click)="addToCard(product.id)" class="btn-main w-100">
                    Add to Card
                  </button>
                </div>
            </div>
          </div>
        
      }
    </div>
  </section>
</div>

<div class="pagenation text-center d-flex align-items-center justify-content-center gap-4 my-3">
  <i class="fa-solid fa-angle-up fa-rotate-270 cr" (click)="prevPage()"></i>
  <span [ngClass]="{'text-white': !checkpag,'btn-main': !checkpag}" class="fw-medium cr p-3 np rounded-1" (click)="prevPage()">1</span>
  <span [ngClass]="{'text-white': checkpag,'btn-main':checkpag}"  class="fw-medium cr p-0 np rounded-1" (click)="nextPage()">2</span>
  <i class="fa-solid fa-angle-up fa-rotate-90 cr" (click)="nextPage()"></i>
</div>
