<section class="my-3">
    <h1 class="h2 text-main">{{'Popular Products :' | translate}}</h1>
    <input
      [(ngModel)]="text"
      type="search"
      placeholder="Search By Products Name...."
      class="form-control w-50 mx-auto my-2"
    />
    <div class="row rowProduct g-3">
      <!-- @if (heartproduct!=null) {
        @for (product of heartproduct| search : text; track product.id) {
          <div class="col-lg-2 col-md-3 colProduct col-sm-6">
            <div class="product forSmallDevices position-relative">
                <div [routerLink]="['/details', product.id]" class="cr">
                  <div class="imgContainer">
                    <img
                      [src]="product.imageCover"
                      class="imageCover w-100"
                      [alt]="product.title"
                    />
                  </div>
                  <div class="p-1">
                    <h3 class="small text-main p-0 m-0">
                      {{ product.category.name }}
                    </h3>
    
                  </div>
                  <div
                    class="ratingdetails m-0 p-1"
                  >
                    <span class="productPrice">{{ product.price }} EGP</span>
                    <div>
                      @for (rat of stars.slice(0,product.ratingsAverage); track
                      $index) {
                      <span class="Sfa-star"
                        ><i class="fas fa-star rating-color"></i
                      ></span>
                      } @if (product.ratingsAverage%2 != 0 &&
                      product.ratingsAverage!=5) {
                      <i
                        class="Sfa-star fa-solid fa-star-half-stroke rating-color"
                      ></i>
                      }
                      <span class="productRatingsAverage text-muted">{{
                        product.ratingsAverage
                      }}</span>
                    </div>
                  </div>
                </div>
                <div class="TitleandHeart">
                  <h4 class="h6 p-0 m-0">
                    {{ product.title.split(" ", 2).join(" ") }}
                  </h4>
                  <div class="heartIcon text-danger">
                    <span (click)="addProductToWishList(product.id)">
                      <i class="fa-solid fa-heart" (click)="chageHeart($event)"></i>
                    </span>
                  </div>
                </div>
                <div class="p-2">
                  <button (click)="addToCard(product.id)" class="btn-main w-100">
                    Add to Card
                  </button>
                </div>
            </div>
          </div>
        }
      } -->
      @for (product of productList| search : text; track product.id) {
        <div class="col-lg-2 col-md-3 colProduct col-sm-6">
            <div class="product forSmallDevices position-relative">
                <div [routerLink]="['/details', product.id]" class="cr">
                  <div class="imgContainer">
                    <img
                      [src]="product.imageCover"
                      class="imageCover w-100"
                      [alt]="product.title"
                    />
                  </div>
                  <div class="p-1">
                    <h3 class="small text-main p-0 m-0">
                      {{ product.category.name }}
                    </h3>
    
                  </div>
                </div>
                <div class="TitleandHeart p-0">
                  <h4 class="h6 p-0 m-0">
                    {{ product.title.split(" ", 2).join(" ") }}
                  </h4>
                  <div class="heartIcon">
                      @if (productID.includes(product._id)) {
                        <i (click)="deleteItem(product._id)" class="fa-solid fa-heart text-danger"></i>
                      }
                      @if(!productID.includes(product._id)){
                        <i (click)="addProductToWishList(product._id)" class="fa-regular fa-heart"></i>
                      }
                  </div>
                </div>
                <div  [routerLink]="['/details', product.id]" class="cr">
                <div
                  class="ratingdetails m-0 p-1"
                >
                  <span class="productPrice">{{ product.price }} EGP</span>
                  <div>
                    @for (rat of stars.slice(0,product.ratingsAverage); track
                    $index) {
                    <span class="Sfa-star"
                      ><i class="fas fa-star rating-color"></i
                    ></span>
                    } @if (product.ratingsAverage%2 != 0 &&
                    product.ratingsAverage!=5) {
                    <i
                      class="Sfa-star fa-solid fa-star-half-stroke rating-color"
                    ></i>
                    }
                    <span class="productRatingsAverage text-muted">{{
                      product.ratingsAverage
                    }}</span>
                  </div>
                </div>
                </div>

                <div class="p-2">
                  <button (click)="addToCard(product.id)" class="btn-main w-100">
                    Add to Card
                  </button>
                </div>
            </div>
          </div>
        
      }
      @for (product of productList2| search : text; track product.id) {
        <div class="col-lg-2 col-md-3 colProduct col-sm-6">
            <div class="product forSmallDevices position-relative">
                <div [routerLink]="['/details', product.id]" class="cr">
                  <div class="imgContainer">
                    <img
                      [src]="product.imageCover"
                      class="imageCover w-100"
                      [alt]="product.title"
                    />
                  </div>
                  <div class="p-1">
                    <h3 class="small text-main p-0 m-0">
                      {{ product.category.name }}
                    </h3>
    
                  </div>
                </div>
                <div class="TitleandHeart p-0">
                  <h4 class="h6 p-0 m-0">
                    {{ product.title.split(" ", 2).join(" ") }}
                  </h4>
                  <div class="heartIcon">
                      @if (productID.includes(product._id)) {
                        <i (click)="deleteItem(product._id)" class="fa-solid fa-heart text-danger"></i>
                      }
                      @if(!productID.includes(product._id)){
                        <i (click)="addProductToWishList(product._id)" class="fa-regular fa-heart"></i>
                      }
                  </div>
                </div>
                <div  [routerLink]="['/details', product.id]" class="cr">
                <div
                  class="ratingdetails m-0 p-1"
                >
                  <span class="productPrice">{{ product.price }} EGP</span>
                  <div>
                    @for (rat of stars.slice(0,product.ratingsAverage); track
                    $index) {
                    <span class="Sfa-star"
                      ><i class="fas fa-star rating-color"></i
                    ></span>
                    } @if (product.ratingsAverage%2 != 0 &&
                    product.ratingsAverage!=5) {
                    <i
                      class="Sfa-star fa-solid fa-star-half-stroke rating-color"
                    ></i>
                    }
                    <span class="productRatingsAverage text-muted">{{
                      product.ratingsAverage
                    }}</span>
                  </div>
                </div>
                </div>

                <div class="p-2">
                  <button (click)="addToCard(product.id)" class="btn-main w-100">
                    Add to Card
                  </button>
                </div>
            </div>
          </div>
        
      }
    </div>
  </section>